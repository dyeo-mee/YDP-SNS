{% extends 'index_base.html' %}
{% block user %}
<div class="user_container">
    <!-- <div class="user_background">
        background photo
    </div> -->
    <img src="{{ user['background_img'][1] }}" alt="" class="user_background">
    <div class="user_profile">
        <div class="profile_container">
            <!-- <div class="profile_image">
                user photo
            </div> -->
            <img src="{{ user['profile_img'][1] }}" alt="" class="profile_image">            
            <div class="information_container">
                <div class="user_information">
                    <div class="user_name_friend">
                        <h2>{{user['nickname']}}</h2>
                        <div>
                            friend count = {{user['friend_list']|length}}
                        </div>
                    </div>
                    
                    <div id="request_button" class="user_friend_button">
                        {% if session['nickname'] != user['nickname'] %}
                            {% if user['user_id'] not in session_friend_list %}   
                                <button class="request_btn" user = "{{user['user_id']}}" friend_list = "{{ session_request_list }}"\
                                    value = 'not friend' data-name='{{session["login"]}}'></button>
                            {% else %}
                                <button class="request_btn" user = "{{user['user_id']}}" friend_list = "{{session_friend_list}}"\
                                     value = 'friend' data-name='{{session["login"]}}'>친구 삭제</button>                                
                            {% endif %}
                        <!-- 세션 로그인 유저일 경우 setting 이동 버튼 표시 -->
                        {% else%}
                            <a href="/setting" class="user_setting_btn">
                                <img src="../static/img/setting.png" alt="" class="top_bar_icon">
                            </a>
                        {% endif %}
                    </div>
                </div>
                <div class="user_introduce">
                    <h4>소개</h4>
                    <div class="user_introduce_text">
                        {{ user['bio'] }}
                    </div>
                </div>
            </div>
        </div>
        <div class="both_layout">
            <div class="both_layout_friend">
                친구 목록
                {% for friend in friend_dic %}
                <div class="search_user"> 
                   <div class="user_profile_img">
                       <img src="{{friend_dic[friend]['profile_img'][1] }}"  class="user_profile_img">
                   <!-- <div class="search_user_image"> -->
                       <!-- user 검색 결과 프로필 이미지 -->
                   </div>
                   <div class="user_name_id">
                       <a class="" href ="/user/{{friend_dic[friend]['nickname']}}" >
                           {{friend_dic[friend]['nickname']}}
                       </a>
                       <div class="user_id">
                           {{ friend_dic[friend]['user_name'] }}
                       </div>
                   </div>
                </div> 
                {% endfor %}
            </div>
            <div class="both_layout_content">
                content list
            </div>
        </div>
    </div>
</div>
<script src="../static/js/user.js" defer="defer"></script>
{% endblock %}